# Figma è¨­è¨ˆè³‡æºæå–è…³æœ¬ä½¿ç”¨èªªæ˜Ž

## ðŸ“‹ å‰ç½®æº–å‚™

### 1. å–å¾— Figma Personal Access Token

è«‹ä¾ç…§ä»¥ä¸‹æ­¥é©Ÿå–å¾—æ‚¨çš„ Tokenï¼š

1. åƒè€ƒæ–‡ä»¶ï¼š`docs/figma-token-setup.md`
2. å‰å¾€ [Figma Settings](https://www.figma.com/settings) å»ºç«‹ Token
3. è¤‡è£½ç”¢ç”Ÿçš„ Tokenï¼ˆæ ¼å¼ï¼š`figd_XXXXXXXXXX...`ï¼‰

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

**é¸é … Aï¼šä½¿ç”¨ .env æª”æ¡ˆï¼ˆæŽ¨è–¦ï¼‰**

```bash
# 1. è¤‡è£½ç¯„æœ¬æª”æ¡ˆ
cp .env.example .env

# 2. ç·¨è¼¯ .env ä¸¦å¡«å…¥æ‚¨çš„ Token
# FIGMA_ACCESS_TOKEN=figd_ä½ çš„å¯¦éš›Token

# 3. è¼‰å…¥ç’°å¢ƒè®Šæ•¸
source .env
```

**é¸é … Bï¼šç›´æŽ¥è¨­å®šç’°å¢ƒè®Šæ•¸**

```bash
# macOS / Linux
export FIGMA_ACCESS_TOKEN="figd_ä½ çš„å¯¦éš›Token"

# Windows PowerShell
$env:FIGMA_ACCESS_TOKEN="figd_ä½ çš„å¯¦éš›Token"
```

### 3. ç¢ºèªä¾è³´å·¥å…·

æ­¤è…³æœ¬éœ€è¦ä»¥ä¸‹å·¥å…·ï¼š

- `curl` - HTTP è«‹æ±‚å·¥å…·
- `jq` - JSON è™•ç†å·¥å…·

**macOS å®‰è£ï¼š**
```bash
brew install jq
```

**Linux (Ubuntu/Debian) å®‰è£ï¼š**
```bash
sudo apt-get install jq
```

**æª¢æŸ¥å®‰è£ï¼š**
```bash
curl --version
jq --version
```

## ðŸš€ åŸ·è¡Œè…³æœ¬

### åŸºæœ¬åŸ·è¡Œ

```bash
# ç¢ºä¿åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„
cd /Users/chunchun/æ–‡ä»¶/speckit/counter_flutter

# åŸ·è¡Œæå–è…³æœ¬
./scripts/extract-figma-design.sh
```

### é æœŸè¼¸å‡º

è…³æœ¬æœƒåŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š

1. âœ… é©—è­‰ Figma Token
2. ðŸ“¥ è®€å– Figma æª”æ¡ˆè³‡è¨Š
3. ðŸ“„ æå–æ‰€æœ‰é é¢
4. ðŸŽ¨ æå–è¨­è¨ˆç³»çµ±æ¨£å¼ï¼ˆè‰²å½©ã€æ–‡å­—ã€ç‰¹æ•ˆï¼‰
5. ðŸ§© æå–å¯é‡ç”¨å…ƒä»¶
6. ðŸ” åˆ†æžè¨­è¨ˆåƒæ•¸ï¼ˆåœ“è§’ã€é–“è·ã€é™°å½±ç­‰ï¼‰
7. ðŸ–¼ï¸  åŒ¯å‡ºåœ–ç‰‡è³‡æºï¼ˆSVG å„ªå…ˆï¼ŒPNG @2x å‚™ç”¨ï¼‰
8. ðŸ“ ç”¢ç”Ÿè¨­è¨ˆè¦æ ¼ JSON æ–‡ä»¶

### è¼¸å‡ºæª”æ¡ˆ

åŸ·è¡ŒæˆåŠŸå¾Œæœƒç”¢ç”Ÿï¼š

```
design-assets/              # åœ–ç‰‡è³‡æºè³‡æ–™å¤¾
â”œâ”€â”€ component_name_1.svg    # SVG æ ¼å¼åœ–ç‰‡
â”œâ”€â”€ component_name_2@2x.png # PNG @2x æ ¼å¼åœ–ç‰‡
â””â”€â”€ ...

docs/
â””â”€â”€ design-spec.json        # å®Œæ•´è¨­è¨ˆè¦æ ¼æ–‡ä»¶
```

## ðŸ“– è¨­è¨ˆè¦æ ¼æ–‡ä»¶çµæ§‹

`docs/design-spec.json` åŒ…å«ï¼š

```json
{
  "metadata": {
    "figmaFileKey": "æª”æ¡ˆ ID",
    "fileName": "æª”æ¡ˆåç¨±",
    "extractedAt": "æå–æ™‚é–“",
    "pageCount": "é é¢æ•¸é‡",
    "componentCount": "å…ƒä»¶æ•¸é‡"
  },
  "colors": [...],           // è‰²å½©æ¨£å¼
  "textStyles": [...],       // æ–‡å­—æ¨£å¼
  "effectStyles": [...],     // ç‰¹æ•ˆæ¨£å¼ï¼ˆé™°å½±ç­‰ï¼‰
  "components": [...],       // å¯é‡ç”¨å…ƒä»¶åˆ—è¡¨
  "designTokens": {
    "cornerRadii": [...],    // åœ“è§’æ•¸å€¼
    "spacings": [...],       // é–“è·æ•¸å€¼
    "effects": [...],        // é™°å½±æ•ˆæžœè©³ç´°è³‡è¨Š
    "textProperties": [...]  // æ–‡å­—å±¬æ€§ï¼ˆå­—é«”ã€å¤§å°ã€è¡Œé«˜ï¼‰
  }
}
```

## ðŸ”§ æ•…éšœæŽ’é™¤

### å•é¡Œ 1: Token èªè­‰å¤±æ•—

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
âŒ éŒ¯èª¤: Figma API èªè­‰å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„ Token æ˜¯å¦æ­£ç¢º
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. ç¢ºèª Token è¤‡è£½å®Œæ•´ï¼ˆåŒ…å« `figd_` å‰ç¶´ï¼‰
2. æª¢æŸ¥ Token æ˜¯å¦éŽæœŸæˆ–è¢«æ’¤éŠ·
3. é‡æ–°ç”¢ç”Ÿ Token ä¸¦æ›´æ–° `.env`

### å•é¡Œ 2: æ‰¾ä¸åˆ° jq æŒ‡ä»¤

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
command not found: jq
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
```bash
# macOS
brew install jq

# Linux
sudo apt-get install jq
```

### å•é¡Œ 3: ç„¡æ³•åŒ¯å‡ºåœ–ç‰‡

**å¯èƒ½åŽŸå› ï¼š**
- Figma æª”æ¡ˆæ¬Šé™ä¸è¶³
- ç¶²è·¯é€£ç·šå•é¡Œ
- API Rate Limit

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. ç¢ºèªæ‚¨å° Figma æª”æ¡ˆæœ‰æª¢è¦–æ¬Šé™
2. æª¢æŸ¥ç¶²è·¯é€£ç·š
3. ç­‰å¾…ä¸€æ®µæ™‚é–“å¾Œé‡è©¦ï¼ˆé¿å… API rate limitï¼‰

### å•é¡Œ 4: ç’°å¢ƒè®Šæ•¸æœªè¼‰å…¥

**æª¢æŸ¥æ–¹æ³•ï¼š**
```bash
echo $FIGMA_ACCESS_TOKEN
# æ‡‰é¡¯ç¤ºæ‚¨çš„ Tokenï¼Œå¦‚æžœç‚ºç©ºå‰‡è¡¨ç¤ºæœªè¼‰å…¥
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
```bash
# é‡æ–°è¼‰å…¥ .env
source .env

# æˆ–ç›´æŽ¥è¨­å®š
export FIGMA_ACCESS_TOKEN="figd_ä½ çš„Token"
```

## ðŸ“š å¾ŒçºŒæ­¥é©Ÿ

æå–å®Œè¨­è¨ˆè³‡æºå¾Œï¼š

1. **æª¢è¦–è¨­è¨ˆè¦æ ¼ï¼š**
   ```bash
   cat docs/design-spec.json | jq .
   ```

2. **ç€è¦½åœ–ç‰‡è³‡æºï¼š**
   ```bash
   ls -lh design-assets/
   ```

3. **åŸ·è¡ŒåŠŸèƒ½è¦æ ¼åŒ–ï¼š**
   ```bash
   # ä½¿ç”¨ /speckit.specify æŒ‡ä»¤å»ºç«‹å®Œæ•´åŠŸèƒ½è¦æ ¼
   # è¨­è¨ˆè¦æ ¼æœƒè‡ªå‹•æ•´åˆè‡³ spec.md
   ```

## ðŸ”— ç›¸é—œæ–‡ä»¶

- [Figma Token è¨­å®šæŒ‡å—](../docs/figma-token-setup.md)
- [Figma REST API æ–‡ä»¶](https://www.figma.com/developers/api)
- [å°ˆæ¡ˆæ†²ç« ](../.specify/memory/constitution.md)

## ðŸ’¡ æŠ€è¡“ç´°ç¯€

### API ç«¯é»žä½¿ç”¨

æ­¤è…³æœ¬ä½¿ç”¨ä»¥ä¸‹ Figma REST API ç«¯é»žï¼š

1. **GET /v1/files/:key**
   - å–å¾—æª”æ¡ˆå®Œæ•´çµæ§‹å’Œæ¨£å¼

2. **GET /v1/images/:key**
   - åŒ¯å‡ºç¯€é»žç‚ºåœ–ç‰‡ï¼ˆSVG/PNGï¼‰

### Rate Limiting

Figma API æœ‰ rate limitï¼š
- æ¯åˆ†é˜ç´„ 150 æ¬¡è«‹æ±‚
- è…³æœ¬åœ¨æ¯æ¬¡åœ–ç‰‡åŒ¯å‡ºå¾Œæœƒæš«åœ 0.5 ç§’

### è³‡æ–™æå–ç­–ç•¥

1. **å®Œæ•´æŽƒæï¼š** è®€å–æ•´å€‹æª”æ¡ˆçµæ§‹
2. **éžè¿´åˆ†æžï¼š** æ·±åº¦éæ­·æ‰€æœ‰ç¯€é»ž
3. **åŽ»é‡è™•ç†ï¼š** ç›¸åŒå±¬æ€§åªè¨˜éŒ„ä¸€æ¬¡
4. **å„ªå…ˆç´šåŒ¯å‡ºï¼š** SVG > PNG @2x
